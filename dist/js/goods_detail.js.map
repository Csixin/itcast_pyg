{"version":3,"sources":["goods_detail.js"],"names":["$","init","eventList","GoodObj","on","userInfo","sessionStorage","getItem","token","JSON","parse","info","cat_id","goods_id","goods_name","goods_number","goods_price","goods_small_logo","goods_weight","mui","confirm","btnIndex","index","ajax","type","url","data","stringify","headers","Authorization","dataType","success","res","console","log","toast","setItem","location","href","getUrl","meta","status","html","template","gallery","slider","interval","name","reg","RegExp","r","window","search","substr","match","decodeURI"],"mappings":"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","sourcesContent":["$(function () {\r\n    init()\r\n    eventList();\r\n\r\n    let GoodObj = {};\r\n\r\n    function eventList() {\r\n        // 绑定 加入购物车 点击 事件\r\n        $(\".shopping_car_btn\").on(\"tap\", function () {\r\n            let userInfo = sessionStorage.getItem(\"userInfo\");\r\n\r\n\r\n            if (userInfo) {\r\n                let token = JSON.parse(userInfo).token;\r\n                let info = {\r\n                    cat_id: GoodObj.cat_id,\r\n                    goods_id: GoodObj.goods_id,\r\n                    goods_name: GoodObj.goods_name,\r\n                    goods_number: GoodObj.goods_number,\r\n                    goods_price: GoodObj.goods_price,\r\n                    goods_small_logo: GoodObj.goods_small_logo,\r\n                    goods_weight: GoodObj.goods_weight\r\n                }\r\n                mui.confirm(\"是否要加入购物车\", \"提示\", [\"确认\", \"取消\"], (btnIndex) => {\r\n                    if (btnIndex.index == 0) {\r\n                        //确认\r\n                        $.ajax({\r\n                            type: \"post\",\r\n                            url: \"http://api.pyg.ak48.xyz/api/public/v1/my/cart/add\",\r\n                            data: {\r\n                                info: JSON.stringify(info)\r\n                            },\r\n                            // 请求头的配置\r\n                            headers: {\r\n                                Authorization: token\r\n                            },\r\n                            dataType: \"json\",\r\n                            success: function (res) {\r\n                                console.log(res)\r\n                            }\r\n                        });\r\n                    } else if (btnIndex.index == 1) {\r\n                        mui.toast(\"取消加入购物车\")\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                sessionStorage.setItem(\"pageUrl\", location.href);\r\n                location.href = \"login.html\"\r\n            }\r\n\r\n        })\r\n\r\n    }\r\n\r\n    function init() {\r\n        $.ajax({\r\n            type: \"get\",\r\n            url: \"http://api.pyg.ak48.xyz/api/public/v1/goods/detail\",\r\n            data: {\r\n                goods_id: getUrl(\"goods_id\")\r\n            },\r\n            dataType: \"json\",\r\n            success: function (res) {\r\n                if (res.meta.status == 200) {\r\n                    GoodObj = res.data;\r\n                    let html = template(\"contTml\", res.data);\r\n                    $(\".pyg_view\").html(html);\r\n                    var gallery = mui('.mui-slider');\r\n                    gallery.slider({\r\n                        interval: 3000 //自动轮播周期，若为0则不自动播放，默认为0；\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    function getUrl(name) {\r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if (r != null) return decodeURI(r[2]);\r\n        return null;\r\n    }\r\n})"],"file":"goods_detail.js"}