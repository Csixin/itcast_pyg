{"version":3,"sources":["register.js"],"names":["$","on","mobile_text","val","residue","attr","text","timerId","setInterval","removeAttr","clearInterval","ajax","type","url","data","mobile","dataType","success","res","console","log","trim","code_text","email_text","pwd_text","rePwd_text","gender_text","checkPhone","mui","toast","length","checkEmail","code","email","pwd","gender","meta","status","msg","phone","test","myemail","myReg"],"mappings":";;AAAAA,CAAC,CAAC,YAAY;AAEV;AACAA,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeC,EAAf,CAAkB,KAAlB,EAAyB,YAAM;AAC3B,QAAIC,WAAW,GAAGF,CAAC,CAAC,sBAAD,CAAD,CAA0BG,GAA1B,EAAlB;AACA,QAAIC,OAAO,GAAG,CAAd;AACAJ,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAeK,IAAf,CAAoB,UAApB,EAAgC,UAAhC,EAA4CC,IAA5C,uBAAsDF,OAAtD;AACA,QAAIG,OAAO,GAAGC,WAAW,CAAC,YAAY;AAClCJ,MAAAA,OAAO;AACPJ,MAAAA,CAAC,CAAC,WAAD,CAAD,CAAeM,IAAf,uBAAyBF,OAAzB;;AACA,UAAIA,OAAO,IAAI,CAAf,EAAkB;AACdJ,QAAAA,CAAC,CAAC,WAAD,CAAD,CAAeM,IAAf,mCAA6BG,UAA7B,CAAwC,UAAxC,EAAoD,UAApD;AACAC,QAAAA,aAAa,CAACH,OAAD,CAAb;AACH;AACJ,KAPwB,EAOtB,IAPsB,CAAzB;AAQAP,IAAAA,CAAC,CAACW,IAAF,CAAO;AACHC,MAAAA,IAAI,EAAE,MADH;AAEHC,MAAAA,GAAG,EAAE,0DAFF;AAGHC,MAAAA,IAAI,EAAE;AACFC,QAAAA,MAAM,EAAEb;AADN,OAHH;AAMHc,MAAAA,QAAQ,EAAE,MANP;AAOHC,MAAAA,OAAO,EAAE,iBAAUC,GAAV,EAAe;AACpBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH;AATE,KAAP;AAWH,GAvBD,EAHU,CA2BV;;AACAlB,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBC,EAAnB,CAAsB,KAAtB,EAA6B,YAAM;AAC/B,QAAIC,WAAW,GAAGF,CAAC,CAAC,sBAAD,CAAD,CAA0BG,GAA1B,GAAgCkB,IAAhC,EAAlB;AACA,QAAIC,SAAS,GAAGtB,CAAC,CAAC,oBAAD,CAAD,CAAwBG,GAAxB,GAA8BkB,IAA9B,EAAhB;AACA,QAAIE,UAAU,GAAGvB,CAAC,CAAC,qBAAD,CAAD,CAAyBG,GAAzB,GAA+BkB,IAA/B,EAAjB;AACA,QAAIG,QAAQ,GAAGxB,CAAC,CAAC,mBAAD,CAAD,CAAuBG,GAAvB,GAA6BkB,IAA7B,EAAf;AACA,QAAII,UAAU,GAAGzB,CAAC,CAAC,SAAD,CAAD,CAAaG,GAAb,GAAmBkB,IAAnB,EAAjB;AACA,QAAIK,WAAW,GAAG1B,CAAC,CAAC,8BAAD,CAAD,CAAkCG,GAAlC,GAAwCkB,IAAxC,EAAlB,CAN+B,CAO/B;;AACA,QAAIM,UAAU,CAACzB,WAAD,CAAd,EAA6B;AACzBiB,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH,KAFD,MAEO;AACHQ,MAAAA,GAAG,CAACC,KAAJ,CAAU,WAAV;AACA;AACH,KAb8B,CAc/B;;;AACA,QAAIP,SAAS,CAACQ,MAAV,IAAoB,CAAxB,EAA2B;AACvBX,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH,KAFD,MAEO;AACHQ,MAAAA,GAAG,CAACC,KAAJ,CAAU,WAAV;AACA;AACH,KApB8B,CAqB/B;;;AACA,QAAIE,UAAU,CAACR,UAAD,CAAd,EAA4B;AACxBJ,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH,KAFD,MAEO;AACHQ,MAAAA,GAAG,CAACC,KAAJ,CAAU,YAAV;AACA;AACH,KA3B8B,CA4B/B;;;AACA,QAAIL,QAAQ,CAACM,MAAT,IAAmB,CAAnB,IAAwBN,QAAQ,CAACM,MAAT,IAAmB,EAA/C,EAAmD;AAC/CX,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACH,KAFD,MAEO;AACHQ,MAAAA,GAAG,CAACC,KAAJ,CAAU,aAAV;AACA;AACH,KAlC8B,CAmC/B;;;AACA,QAAIJ,UAAU,KAAKD,QAAnB,EAA6B;AACzBL,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH,KAFD,MAEO;AACHQ,MAAAA,GAAG,CAACC,KAAJ,CAAU,WAAV;AACA;AACH;;AACD7B,IAAAA,CAAC,CAACW,IAAF,CAAO;AACHC,MAAAA,IAAI,EAAE,MADH;AAEHC,MAAAA,GAAG,EAAE,iDAFF;AAGHC,MAAAA,IAAI,EAAE;AACFC,QAAAA,MAAM,EAAEb,WADN;AAEF8B,QAAAA,IAAI,EAAEV,SAFJ;AAGFW,QAAAA,KAAK,EAAEV,UAHL;AAIFW,QAAAA,GAAG,EAAEV,QAJH;AAKFW,QAAAA,MAAM,EAAET;AALN,OAHH;AAUHV,MAAAA,QAAQ,EAAE,MAVP;AAWHC,MAAAA,OAAO,EAAE,iBAAUC,GAAV,EAAe;AACpB,YAAIA,GAAG,CAACkB,IAAJ,CAASC,MAAT,IAAmB,GAAvB,EAA4B;AACxBT,UAAAA,GAAG,CAACC,KAAJ,CAAUX,GAAG,CAACkB,IAAJ,CAASE,GAAnB;AACH;AACJ;AAfE,KAAP;AAkBH,GA5DD,EA5BU,CAyFV;;AACA,WAASX,UAAT,CAAoBY,KAApB,EAA2B;AACvB,QAAI,CAAE,kBAAkBC,IAAlB,CAAuBD,KAAvB,CAAN,EAAsC;AAClC,aAAO,KAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAP;AACH;AACJ;;AAAA,GAhGS,CAiGV;;AACA,WAASR,UAAT,CAAoBU,OAApB,EAA6B;AACzB,QAAIC,KAAK,GAAG,oDAAZ;;AACA,QAAIA,KAAK,CAACF,IAAN,CAAWC,OAAX,CAAJ,EAAyB;AACrB,aAAO,IAAP;AACH,KAFD,MAEO;AACH,aAAO,KAAP;AACH;AACJ;AACJ,CA1GA,CAAD","sourcesContent":["$(function () {\r\n\r\n    //获取验证码\r\n    $(\"#security\").on(\"tap\", () => {\r\n        let mobile_text = $(\"input[name='mobile']\").val();\r\n        let residue = 5;\r\n        $(\"#security\").attr(\"disabled\", \"disabled\").text(`剩余${residue}秒重新发送`);\r\n        let timerId = setInterval(function () {\r\n            residue--;\r\n            $(\"#security\").text(`剩余${residue}秒重新发送`);\r\n            if (residue == 0) {\r\n                $(\"#security\").text(`获取验证码`).removeAttr(\"disabled\", \"disabled\");\r\n                clearInterval(timerId);\r\n            }\r\n        }, 1000)\r\n        $.ajax({\r\n            type: \"post\",\r\n            url: \"http://api.pyg.ak48.xyz/api/public/v1/users/get_reg_code\",\r\n            data: {\r\n                mobile: mobile_text\r\n            },\r\n            dataType: \"json\",\r\n            success: function (res) {\r\n                console.log(res)\r\n            }\r\n        });\r\n    })\r\n    //注册按钮,发送请求前先做表单验证\r\n    $(\".pyg-register\").on(\"tap\", () => {\r\n        let mobile_text = $(\"input[name='mobile']\").val().trim();\r\n        let code_text = $(\"input[name='code']\").val().trim();\r\n        let email_text = $(\"input[name='email']\").val().trim();\r\n        let pwd_text = $(\"input[name='pwd']\").val().trim();\r\n        let rePwd_text = $(\".re-pwd\").val().trim();\r\n        let gender_text = $(\"input[name='gender']:checked\").val().trim();\r\n        //验证手机号码\r\n        if (checkPhone(mobile_text)) {\r\n            console.log(\"手机号验证成功\")\r\n        } else {\r\n            mui.toast(\"请输入正确的手机号\");\r\n            return;\r\n        }\r\n        //验证验证码是否合法\r\n        if (code_text.length == 4) {\r\n            console.log(\"验证码验证成功\")\r\n        } else {\r\n            mui.toast(\"请输入合法的验证码\");\r\n            return;\r\n        }\r\n        //验证邮箱是否合法\r\n        if (checkEmail(email_text)) {\r\n            console.log(\"邮箱验证成功\")\r\n        } else {\r\n            mui.toast(\"请输入正确的邮箱地址\");\r\n            return;\r\n        }\r\n        //验证密码长度\r\n        if (pwd_text.length >= 6 && pwd_text.length <= 12) {\r\n            console.log(\"密码允许\");\r\n        } else {\r\n            mui.toast(\"密码长度应在6-12位\");\r\n            return;\r\n        }\r\n        //验证再次输入的密码是否一致\r\n        if (rePwd_text === pwd_text) {\r\n            console.log(\"两次密码输入一致\");\r\n        } else {\r\n            mui.toast(\"两次密码输入不一致\");\r\n            return;\r\n        }\r\n        $.ajax({\r\n            type: \"post\",\r\n            url: \"http://api.pyg.ak48.xyz/api/public/v1/users/reg\",\r\n            data: {\r\n                mobile: mobile_text,\r\n                code: code_text,\r\n                email: email_text,\r\n                pwd: pwd_text,\r\n                gender: gender_text\r\n            },\r\n            dataType: \"json\",\r\n            success: function (res) {\r\n                if (res.meta.status != 200) {\r\n                    mui.toast(res.meta.msg)\r\n                }\r\n            }\r\n        });\r\n\r\n    })\r\n    //手机号码验证\r\n    function checkPhone(phone) {\r\n        if (!(/^1[34578]\\d{9}$/.test(phone))) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    };\r\n    //邮箱验证\r\n    function checkEmail(myemail) {\r\n        var myReg = /^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\\.)+(com|cn|net|org)$/;\r\n        if (myReg.test(myemail)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n})"],"file":"register.js"}