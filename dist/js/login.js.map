{"version":3,"sources":["login.js"],"names":["$","on","username_text","val","trim","password_text","checkPhone","console","log","mui","toast","length","ajax","type","url","data","username","password","dataType","success","res","meta","status","pageUrl","sessionStorage","getItem","setItem","JSON","stringify","timeId","setTimeout","location","href","phone","test"],"mappings":";;AAAAA,CAAC,CAAC,YAAY;AAEVA,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBC,EAAhB,CAAmB,KAAnB,EAA0B,YAAM;AAC5B,QAAIC,aAAa,GAAGF,CAAC,CAAC,wBAAD,CAAD,CAA4BG,GAA5B,GAAkCC,IAAlC,EAApB;AACA,QAAIC,aAAa,GAAGL,CAAC,CAAC,wBAAD,CAAD,CAA4BG,GAA5B,GAAkCC,IAAlC,EAApB,CAF4B,CAG5B;;AACA,QAAIE,UAAU,CAACJ,aAAD,CAAd,EAA+B;AAC3BK,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH,KAFD,MAEO;AACHC,MAAAA,GAAG,CAACC,KAAJ,CAAU,YAAV;AACA;AACH;;AACD,QAAIL,aAAa,CAACM,MAAd,GAAuB,CAAvB,IAA4BN,aAAa,CAACM,MAAd,GAAuB,EAAvD,EAA2D;AACvDF,MAAAA,GAAG,CAACC,KAAJ,CAAU,WAAV;AACA;AACH,KAHD,MAGO;AACHH,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH;;AACDR,IAAAA,CAAC,CAACY,IAAF,CAAO;AACHC,MAAAA,IAAI,EAAE,MADH;AAEHC,MAAAA,GAAG,EAAE,6CAFF;AAGHC,MAAAA,IAAI,EAAE;AACFC,QAAAA,QAAQ,EAAEd,aADR;AAEFe,QAAAA,QAAQ,EAAEZ;AAFR,OAHH;AAOHa,MAAAA,QAAQ,EAAE,MAPP;AAQHC,MAAAA,OAAO,EAAE,iBAAUC,GAAV,EAAe;AACpB,YAAGA,GAAG,CAACC,IAAJ,CAASC,MAAT,IAAmB,GAAtB,EAA0B;AACtBb,UAAAA,GAAG,CAACC,KAAJ,CAAU,MAAV;AACA,cAAIa,OAAO,GAAGC,cAAc,CAACC,OAAf,CAAuB,SAAvB,CAAd,CAFsB,CAItB;;AACAD,UAAAA,cAAc,CAACE,OAAf,CAAuB,UAAvB,EAAkCC,IAAI,CAACC,SAAL,CAAeR,GAAG,CAACL,IAAnB,CAAlC;AACA,cAAIc,MAAM,GAAGC,UAAU,CAAC,YAAM;AAC1B,gBAAGP,OAAH,EAAW;AACPQ,cAAAA,QAAQ,CAACC,IAAT,GAAgBT,OAAhB;AACH,aAFD,MAEK;AACDQ,cAAAA,QAAQ,CAACC,IAAT,GAAgB,YAAhB;AACH;AACJ,WANsB,EAMpB,IANoB,CAAvB;AAOH;AACJ;AAvBE,KAAP;AA0BH,GA1CD;;AA4CA,WAAS1B,UAAT,CAAoB2B,KAApB,EAA2B;AACvB,QAAI,CAAE,kBAAkBC,IAAlB,CAAuBD,KAAvB,CAAN,EAAsC;AAClC,aAAO,KAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAP;AACH;AACJ;AACJ,CArDA,CAAD","sourcesContent":["$(function () {\r\n\r\n    $(\"#pyg-login\").on(\"tap\", () => {\r\n        let username_text = $(\"input[name='username']\").val().trim();\r\n        let password_text = $(\"input[name='password']\").val().trim();\r\n        //验证账号和密码合法性\r\n        if (checkPhone(username_text)) {\r\n            console.log(\"手机号格式正确\");\r\n        } else {\r\n            mui.toast(\"请输入正确的手机号码\");\r\n            return;\r\n        }\r\n        if (password_text.length < 6 || password_text.length > 12) {\r\n            mui.toast(\"密码应在6-12位\");\r\n            return;\r\n        } else {\r\n            console.log(\"密码格式正确\");\r\n        }\r\n        $.ajax({\r\n            type: \"post\",\r\n            url: \"http://api.pyg.ak48.xyz/api/public/v1/login\",\r\n            data: {\r\n                username: username_text,\r\n                password: password_text\r\n            },\r\n            dataType: \"json\",\r\n            success: function (res) {\r\n                if(res.meta.status == 200){\r\n                    mui.toast(\"成功登陆\");\r\n                    let pageUrl = sessionStorage.getItem(\"pageUrl\");\r\n                    \r\n                    //把token存进sessinStorage,顺手把res.data全塞进去\r\n                    sessionStorage.setItem(\"userInfo\",JSON.stringify(res.data));\r\n                    let timeId = setTimeout(() => {\r\n                        if(pageUrl){\r\n                            location.href = pageUrl;\r\n                        }else{\r\n                            location.href = \"index.html\"\r\n                        }\r\n                    }, 1000);\r\n                }\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    function checkPhone(phone) {\r\n        if (!(/^1[34578]\\d{9}$/.test(phone))) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n})"],"file":"login.js"}